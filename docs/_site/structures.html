<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Data structures - Astrocook</title> <link rel="shortcut icon" href="/astrocook/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/astrocook/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/astrocook/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/astrocook/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>Data structures | Astrocook</title> <meta name="generator" content="Jekyll v3.8.5" /> <meta property="og:title" content="Data structures" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="A thousand recipes to cook a spectrum" /> <meta property="og:description" content="A thousand recipes to cook a spectrum" /> <link rel="canonical" href="http://localhost:4000/astrocook/structures.html" /> <meta property="og:url" content="http://localhost:4000/astrocook/structures.html" /> <meta property="og:site_name" content="Astrocook" /> <script type="application/ld+json"> {"url":"http://localhost:4000/astrocook/structures.html","description":"A thousand recipes to cook a spectrum","headline":"Data structures","@type":"WebPage","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="http://localhost:4000/astrocook/" class="site-title lh-tight"> Astrocook </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/astrocook/start.html" class="nav-list-link">Getting started</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/astrocook/setup.html" class="nav-list-link">Setup</a></li><li class="nav-list-item "><a href="http://localhost:4000/astrocook/gui.html" class="nav-list-link">Using the GUI</a></li><li class="nav-list-item "><a href="http://localhost:4000/astrocook/script.html" class="nav-list-link">Scripting your workflows</a></li></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/astrocook/data.html" class="nav-list-link">Managing data</a><ul class="nav-list "><li class="nav-list-item active"><a href="http://localhost:4000/astrocook/structures.html" class="nav-list-link active">Data structures</a></li><li class="nav-list-item "><a href="http://localhost:4000/astrocook/graphs.html" class="nav-list-link">Graphs</a></li><li class="nav-list-item "><a href="http://localhost:4000/astrocook/tables.html" class="nav-list-link">Tables</a></li><li class="nav-list-item "><a href="http://localhost:4000/astrocook/other.html" class="nav-list-link">Other tools</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/astrocook/common.html" class="nav-list-link">Common tasks</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/astrocook/merge.html" class="nav-list-link">Merging spectra</a></li><li class="nav-list-item "><a href="http://localhost:4000/astrocook/continuum.html" class="nav-list-link">Continuum estimation</a></li><li class="nav-list-item "><a href="http://localhost:4000/astrocook/absorbers.html" class="nav-list-link">Modeling absorbers</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/astrocook/cookbook.html" class="nav-list-link">Cookbooks</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/astrocook/general_cb.html" class="nav-list-link">General cookbook</a></li><li class="nav-list-item "><a href="http://localhost:4000/astrocook/continuum_cb.html" class="nav-list-link">Continuum cookbook</a></li><li class="nav-list-item "><a href="http://localhost:4000/astrocook/absorbers_cb.html" class="nav-list-link">Absorbers cookbook</a></li><li class="nav-list-item "><a href="http://localhost:4000/astrocook/templates_cb.html" class="nav-list-link">Templates cookbook</a></li></ul></li><li class="nav-list-item"><a href="http://localhost:4000/astrocook/about.html" class="nav-list-link">About</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Astrocook" aria-label="Search Astrocook" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="http://localhost:4000/astrocook/data.html">Managing data</a></li> <li class="breadcrumb-nav-list-item"><span>Data structures</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 class="no_toc" id="data-structures"> <a href="#data-structures" class="anchor-heading" aria-labelledby="data-structures"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Data structures </h1> <h2 class="no_toc text-delta" id="table-of-contents"> <a href="#table-of-contents" class="anchor-heading" aria-labelledby="table-of-contents"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Table of contents </h2> <ol id="markdown-toc"> <li><a href="#spectra" id="markdown-toc-spectra">Spectra</a></li> <li><a href="#list-of-lines" id="markdown-toc-list-of-lines">List of lines</a></li> <li><a href="#list-of-absorption-systems" id="markdown-toc-list-of-absorption-systems">List of absorption systems</a></li> </ol><hr /> <p>Astrocook manages three main data structures: <em>spectra</em>, <em>line lists</em>, and <em>system lists</em>. All three structures include a data table (actually an <a href="https://docs.astropy.org/en/stable/table/">Astropy Table</a> object) and a metadata dictionary. They are formatted as FITS files and bundled into a <code class="language-plaintext highlighter-rouge">.acs</code> archive when you save a snapshot of a session. The <code class="language-plaintext highlighter-rouge">.acs</code> archive may also contain other ancillary data, as described below.</p> <p>To display the data tables, choose <code class="language-plaintext highlighter-rouge">View &gt; Spectrum table</code> (or <code class="language-plaintext highlighter-rouge">Line table</code> or <code class="language-plaintext highlighter-rouge">System table</code>) from the menu bar.</p> <p>❗️ <strong>Long tables can take a long time to display.</strong></p> <h2 id="spectra"> <a href="#spectra" class="anchor-heading" aria-labelledby="spectra"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Spectra </h2> <p>Each Astrocook session is based on a spectrum, i.e. a table that pairs a flux-like quantity to a wavelength-like quantity. We use the expressions “flux-like” and “wavelength-like” to be as general as possible: from the point of view of structure, it doesn’t matter if the spectrum is expressed in wavelengths or frequencies, or if the flux density is calibrated in physical units or not.</p> <p>The fundamental columns of a spectrum are:</p> <ul> <li><code class="language-plaintext highlighter-rouge">x</code>: the wavelength-like independent variable;</li> <li><code class="language-plaintext highlighter-rouge">xmin</code>, <code class="language-plaintext highlighter-rouge">xmax</code>: the interval in <code class="language-plaintext highlighter-rouge">x</code> values in which the flux-like quantity is integrated;</li> <li><code class="language-plaintext highlighter-rouge">y</code>, <code class="language-plaintext highlighter-rouge">dy</code>: the flux-like dependent variable and its error.</li> </ul> <p>The interval [<code class="language-plaintext highlighter-rouge">xmin</code>, <code class="language-plaintext highlighter-rouge">xmax</code>] is also called a <em>pixel</em>, because in some cases it maps to a physical pixel in the spectrograph detector.</p> <p>Other columns that frequently appear in a spectrum are:</p> <ul> <li><code class="language-plaintext highlighter-rouge">y_conv</code>: a convolution of <code class="language-plaintext highlighter-rouge">y</code> with some smoothing kernel;</li> <li><code class="language-plaintext highlighter-rouge">lines_mask</code>: a boolean mask of the detected lines (see <a href="/astrocook/structures.html#list-of-lines">below</a>);</li> <li><code class="language-plaintext highlighter-rouge">cont</code>: the spectral <em>continuum</em>, i.e. the component of <code class="language-plaintext highlighter-rouge">y</code> that remains after removing local features (e.g. absorption lines) and smoothing out noise;</li> <li><code class="language-plaintext highlighter-rouge">model</code>: a spectral <em>model</em>, i.e. a model of both the continuum and the absorption systems (see <a href="/astrocook/structures.html#list-of-absorption-systems">below</a>;</li> <li><code class="language-plaintext highlighter-rouge">deabs</code>: a <em>deabsorbed</em> spectrum, i.e. an equivalent of <code class="language-plaintext highlighter-rouge">y</code> after the absorption lines have been removed using the model;</li> <li><code class="language-plaintext highlighter-rouge">resol</code>: the spectral resolution at <code class="language-plaintext highlighter-rouge">x</code>;</li> <li><code class="language-plaintext highlighter-rouge">fit_mask</code>: a boolean mask of the regions used to fit the model of the absorption systems.</li> </ul> <p>You are free to add other columns to the spectrum or edit the existing ones (as explained <a href="/astrocook/tables.html">here</a>).</p> <h2 id="list-of-lines"> <a href="#list-of-lines" class="anchor-heading" aria-labelledby="list-of-lines"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> List of lines </h2> <p>When you detect spectral lines (either in emission or absorption), they are formatted into a table that is added to the session.</p> <p>The information to populate the table columns is directly extracted from the <a href="/astrocook/structures.html#spectra">spectrum</a> where the lines have been detected:</p> <ul> <li><code class="language-plaintext highlighter-rouge">x</code>: the line center, corresponding to the <code class="language-plaintext highlighter-rouge">x</code> value of a pixel in the spectrum;</li> <li><code class="language-plaintext highlighter-rouge">xmin</code>, <code class="language-plaintext highlighter-rouge">xmax</code>: the boundaries of the interval covered by the line, also corresponding to the <code class="language-plaintext highlighter-rouge">x</code> values of two pixels in the spectrum;</li> <li><code class="language-plaintext highlighter-rouge">y</code>, <code class="language-plaintext highlighter-rouge">dy</code>: values of <code class="language-plaintext highlighter-rouge">y</code> and <code class="language-plaintext highlighter-rouge">dy</code> at <code class="language-plaintext highlighter-rouge">x</code> from the spectrum;</li> <li><code class="language-plaintext highlighter-rouge">source</code>: column of the spectrum that was used to detect the line.</li> </ul> <p>Please note that in this case [<code class="language-plaintext highlighter-rouge">xmin</code>, <code class="language-plaintext highlighter-rouge">xmax</code>] do not map to a single pixel in the spectrum, but to a range of pixels.</p> <p>Lines are not typically detected on the raw <code class="language-plaintext highlighter-rouge">y</code> column of the spectrum, because in general the noise on <code class="language-plaintext highlighter-rouge">y</code> makes it very hard to discriminate between legitimate lines and random fluctuations. This is the reason for keeping track of the <code class="language-plaintext highlighter-rouge">source</code> of the detected lines. A typical <code class="language-plaintext highlighter-rouge">source</code> value is <code class="language-plaintext highlighter-rouge">y_conv</code>, i.e. a convolution of the <code class="language-plaintext highlighter-rouge">y</code> column of the spectrum with some smoothing kernel (see <a href="/astrocook/structures.html#spectra">above</a>) but it may be any other column.</p> <h2 id="list-of-absorption-systems"> <a href="#list-of-absorption-systems" class="anchor-heading" aria-labelledby="list-of-absorption-systems"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> List of absorption systems </h2> <p>Absorption lines detected in quasar spectra are frequently grouped into absorption systems, i.e. sets of lines produced by different ions at the same redshift.</p> <p>In our convention, a system has <em>one and only one</em> redshift. This means that e.g. different doublets at a similar redshift are treated as separated (one redshift per doublet). It also means that each component of an absorbers with a complex velocity structure (also sometimes called a “system”) is considered a system in itself.</p> <p>When you detect absorption systems, they are also formatted into a table added to the session. The table contains the information to model the absorption systems:</p> <ul> <li><code class="language-plaintext highlighter-rouge">func</code>: the function used to define the model (currently, only the Voigt function <code class="language-plaintext highlighter-rouge">voigt</code> is available);</li> <li><code class="language-plaintext highlighter-rouge">series</code>: the list of ionic transitions that are modeled;</li> <li><code class="language-plaintext highlighter-rouge">z0</code>: the starting redshift, typically computed from the <code class="language-plaintext highlighter-rouge">x</code> value of one or more <a href="/astrocook/structures.html#list-of-lines">absorption lines</a>;</li> <li><code class="language-plaintext highlighter-rouge">z</code>, <code class="language-plaintext highlighter-rouge">dz</code>: the redshift of the model and its error;</li> <li><code class="language-plaintext highlighter-rouge">logN</code>, <code class="language-plaintext highlighter-rouge">dlogN</code>: the logarithm of the column density used in the Voigt function (in cm^-2) and its error;</li> <li><code class="language-plaintext highlighter-rouge">b</code>, <code class="language-plaintext highlighter-rouge">db</code>: the doppler parameter used in the Voigt function and its error;</li> <li><code class="language-plaintext highlighter-rouge">resol</code>: the resolution adopted by the model;</li> <li><code class="language-plaintext highlighter-rouge">chi2r</code>: the reduced chi-squared between the model and the data;</li> <li><code class="language-plaintext highlighter-rouge">id</code>: the identification number of the model.</li> </ul> <p>The parameters of the Voigt function (<code class="language-plaintext highlighter-rouge">z</code>, <code class="language-plaintext highlighter-rouge">logN</code>, and <code class="language-plaintext highlighter-rouge">b</code>) may be either guess or fitted parameters. As a rule, when a system is added to the list it is also fitted to the spectrum: <code class="language-plaintext highlighter-rouge">z</code>, <code class="language-plaintext highlighter-rouge">logN</code>, and <code class="language-plaintext highlighter-rouge">b</code> are the best-fit values and <code class="language-plaintext highlighter-rouge">chi2r</code> gives an estimation of the goodness of fit.</p> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
