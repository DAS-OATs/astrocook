<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Merging spectra - Astrocook</title> <link rel="shortcut icon" href="http://localhost:4000/astrocook/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="http://localhost:4000/astrocook/assets/css/just-the-docs.css"> <script type="text/javascript" src="http://localhost:4000/astrocook/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="http://localhost:4000/astrocook/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>Merging spectra | Astrocook</title> <meta name="generator" content="Jekyll v3.8.5" /> <meta property="og:title" content="Merging spectra" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="A thousand recipes to cook a spectrum" /> <meta property="og:description" content="A thousand recipes to cook a spectrum" /> <link rel="canonical" href="http://localhost:4000/astrocook/merge.html" /> <meta property="og:url" content="http://localhost:4000/astrocook/merge.html" /> <meta property="og:site_name" content="Astrocook" /> <script type="application/ld+json"> {"url":"http://localhost:4000/astrocook/merge.html","description":"A thousand recipes to cook a spectrum","headline":"Merging spectra","@type":"WebPage","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="link" viewBox="0 0 16 16"> <title>Link</title> <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path> </symbol> </svg> <div class="page-wrap"> <div class="side-bar"> <div class="site-header"> <a href="http://localhost:4000/astrocook" class="site-title lh-tight"> Astrocook </a> <button class="menu-button fs-3 js-main-nav-trigger" data-text-toggle="Hide" type="button">Menu</button> </div> <div class="navigation main-nav js-main-nav"> <nav role="navigation" aria-label="Main navigation"> <ul class="navigation-list"><li class="navigation-list-item active"><a href="http://localhost:4000/astrocook/404.html" class="navigation-list-link"></a></li><li class="navigation-list-item"><a href="http://localhost:4000/astrocook/" class="navigation-list-link">Home</a></li><li class="navigation-list-item"><a href="http://localhost:4000/astrocook/start.html" class="navigation-list-link">Getting started</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="http://localhost:4000/astrocook/setup.html" class="navigation-list-link">Setup</a></li><li class="navigation-list-item "><a href="http://localhost:4000/astrocook/gui.html" class="navigation-list-link">Using the GUI</a></li></ul></li><li class="navigation-list-item"><a href="http://localhost:4000/astrocook/data.html" class="navigation-list-link">Managing data</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="http://localhost:4000/astrocook/structures.html" class="navigation-list-link">Data structures</a></li><li class="navigation-list-item "><a href="http://localhost:4000/astrocook/plots.html" class="navigation-list-link">Plots</a></li><li class="navigation-list-item "><a href="http://localhost:4000/astrocook/tables.html" class="navigation-list-link">Tables</a></li></ul></li><li class="navigation-list-item active"><a href="http://localhost:4000/astrocook/common.html" class="navigation-list-link">Common tasks</a><ul class="navigation-list-child-list "><li class="navigation-list-item active"><a href="http://localhost:4000/astrocook/merge.html" class="navigation-list-link active">Merging spectra</a></li><li class="navigation-list-item "><a href="http://localhost:4000/astrocook/continuum.html" class="navigation-list-link">Continuum estimation</a></li><li class="navigation-list-item "><a href="http://localhost:4000/astrocook/absorbers.html" class="navigation-list-link">Modeling absorbers</a></li></ul></li><li class="navigation-list-item"><a href="http://localhost:4000/astrocook/cookbook.html" class="navigation-list-link">Cookbooks</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="http://localhost:4000/astrocook/general_cb.html" class="navigation-list-link">General cookbook</a></li><li class="navigation-list-item "><a href="http://localhost:4000/astrocook/continuum_cb.html" class="navigation-list-link">Continuum cookbook</a></li><li class="navigation-list-item "><a href="http://localhost:4000/astrocook/absorbers_cb.html" class="navigation-list-link">Absorbers cookbook</a></li></ul></li><li class="navigation-list-item"><a href="http://localhost:4000/astrocook/about.html" class="navigation-list-link">About</a></li></ul> </nav> </div> <footer class="site-footer"> <p class="text-small text-grey-dk-000 mb-4">This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</p> </footer> </div> <div class="main-content-wrap js-main-content" tabindex="0"> <div class="main-content"> <div class="page-header js-page-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" class="js-search-input search-input" tabindex="0" placeholder="Search Astrocook" aria-label="Search Astrocook" autocomplete="off"> <svg width="14" height="14" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg" class="search-icon"><title>Search</title><g fill-rule="nonzero"><path d="M17.332 20.735c-5.537 0-10-4.6-10-10.247 0-5.646 4.463-10.247 10-10.247 5.536 0 10 4.601 10 10.247s-4.464 10.247-10 10.247zm0-4c3.3 0 6-2.783 6-6.247 0-3.463-2.7-6.247-6-6.247s-6 2.784-6 6.247c0 3.464 2.7 6.247 6 6.247z"/><path d="M11.672 13.791L.192 25.271 3.02 28.1 14.5 16.62z"/></g></svg> </div> <div class="js-search-results search-results-wrap"></div> </div> </div> <div class="page"> <nav class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="http://localhost:4000/astrocook/common.html">Common tasks</a></li> <li class="breadcrumb-nav-list-item"><span>Merging spectra</span></li> </ol> </nav> <div id="main-content" class="page-content" role="main"> <h1 class="no_toc" id="merging-spectra"> <a href="#merging-spectra" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Merging spectra </h1> <h2 class="no_toc text-delta" id="table-of-contents"> <a href="#table-of-contents" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Table of contents </h2> <ol id="markdown-toc"> <li><a href="#rescale-the-spectra" id="markdown-toc-rescale-the-spectra">Rescale the spectra</a></li> <li><a href="#combine-the-spectra" id="markdown-toc-combine-the-spectra">Combine the spectra</a></li> <li><a href="#rebin-the-combined-spectrum" id="markdown-toc-rebin-the-combined-spectrum">Rebin the combined spectrum</a></li> </ol> <hr /> <p><em>Merging</em> is what you do to combine two or more spectra into a single one. In this tutorial, you will learn how to merge two spectra with different wavelength range, like those obtained from different arms of the same instrument (in our case, VIS and NIR arm of VLT X-shooter). The same procedure can be applied to the case of several spectra with the same wavelength range.</p> <p>We assume that the spectra have already been <a href="/astrocook/gui.html#launch-the-gui">loaded</a> in Astrocook:</p> <p><img src="/astrocook/img/merging_start.png" alt="Start" /></p> <h2 id="rescale-the-spectra"> <a href="#rescale-the-spectra" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Rescale the spectra </h2> <p>The first step is to rescale the spectra to the same flux level, to correct for inaccuracies in flux calibration. If you select both spectra by holding <code class="language-plaintext highlighter-rouge">ctrl</code> while clicking on the main window and zoom into the plot, you will see that in the VIS/NIR superposition region the flux is mismatched:</p> <p><img src="/astrocook/img/merging_mismatch.png" alt="Mismatch" /></p> <p>To rescale the NIR spectra to the VIS one, select it on the main window and choose <code class="language-plaintext highlighter-rouge">Edit &gt; Scale y axis...</code>. In the dialog window, insert a suitable multiplicative factor and click on <code class="language-plaintext highlighter-rouge">Run</code>:</p> <p><img src="/astrocook/img/merging_scale_y_axis.png" alt="Scale y axis" /></p> <p>Selecting both spectra and zooming again, you can check that they are now matching:</p> <p><img src="/astrocook/img/merging_match.png" alt="Match" /></p> <p>You may need to rescale a spectrum several times to find a good matching.</p> <p>⚠️ <strong>Please note that the spectra are rescaled in place, without starting a new session. To undo a rescaling, you need to rescale the spectrum again with inverse factor.</strong></p> <h2 id="combine-the-spectra"> <a href="#combine-the-spectra" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Combine the spectra </h2> <p>Once spectra are rescaled, you need to create a combined session out of the individual ones. In the main window, select both sessions and choose <code class="language-plaintext highlighter-rouge">Edit &gt; Combine sessions...</code>. You will be asked for a name for the combination:</p> <p><img src="/astrocook/img/merging_combine_sessions.png" alt="Combine sessions" /></p> <p>The asterisk will be replaced by a concatenation of the selected names (<code class="language-plaintext highlighter-rouge">qso_NIR_qso_VIS</code> in this case). You can also define your own name.</p> <p>On <code class="language-plaintext highlighter-rouge">Run</code>, a new session will be created:</p> <p><img src="/astrocook/img/merging_combined.png" alt="Combined" /></p> <p>The spectrum of this new session contains all the entries of the combined spectra. This means that the pixels of the combined spectrum may overlap with each other (as they keep their original size, defined by <code class="language-plaintext highlighter-rouge">xmin</code> and <code class="language-plaintext highlighter-rouge">xmax</code> in the spectrum table).</p> <p>The same method can be of course used to combine more than two spectra.</p> <p>⚠️ <strong>When sessions are combined, only the spectra are actually combined. All other data structures are not considered.</strong></p> <h2 id="rebin-the-combined-spectrum"> <a href="#rebin-the-combined-spectrum" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Rebin the combined spectrum </h2> <p>It is generally useful to rebin the combined spectrum into a new wavelength grid, to avoid dealing with overlapping pixels. This is done by selecting the combined session in the main window and choosing <code class="language-plaintext highlighter-rouge">Recipes &gt; Rebin spectrum...</code>. You will be asked to provide a step in <code class="language-plaintext highlighter-rouge">x</code> and a unit of wavelength or velocity for the output spectrum:</p> <p><img src="/astrocook/img/merging_rebin_spectrum.png" alt="Rebin spectrum" /></p> <p>In this case, the spectrum will be rebinned into a grid with a fixed step of 10 km/s. The grid is designed to cover the whole wavelength range of the input spectrum. The rebinned spectrum will appear on the plot after completion:</p> <p><img src="/astrocook/img/merging_rebinned.png" alt="Rebinned" /></p> <p>⚠️ <strong>Rebinning may take a long time if the grid is fine and/or the wavelength range is wide.</strong></p> <p>You can rebin any spectrum in any session using the same procedure.</p> <p>⚠️ <strong>Please remember that the rebinning procedure interferes with the statistics of your data, as it introduces correlation among adjacent pixels. If accurate flux statistics is required, please avoid rebinning your spectra when it is not absolutely necessary.</strong></p> </div> </div> </div> </div> </body> </html>
